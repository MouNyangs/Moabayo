<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>모으냥즈</title>
<link rel="icon" href="images/cat.ico" type="image/x-icon" />
<!-- 역할별로 CSS 연결 -->
<link rel="stylesheet" href="css/header.css" />
<link rel="stylesheet" href="css/mainpage.css" />
<link rel="stylesheet" href="css/footer.css" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
<!-- ✅ 외부 JS 파일 연결 -->
<script defer src="js/common.js"></script>
</head>
<body>
	<!-- Header 삽입 -->
	<div id="header"></div>

	<section class="hero">
		<img src="images/cat.png" alt="동전 든 고양이" class="hero-img" />
		<h1>오늘도 귀엽게 모으냥~</h1>
		<a href="#" onclick="goToCardService()"><button class="cta-btn">계좌 & 카드 등록</button></a>
 <a
			href="recommendcards"><button class="cta-btn">저축 시작하기</button></a>
	</section>

	<!-- 추천 저축 상품 -->
	<section class="product-section">
		<h2>지금 인기 있는 저축 상품</h2>
		<div class="product-cards">
			<div class="product-card">
				<h3>단기 저축 플랜</h3>
				<p>6개월 · 연 3.2%</p>
			</div>
			<div class="product-card">
				<h3>고양이 장학적금</h3>
				<p>1년 · 연 4.0%</p>
			</div>
			<div class="product-card">
				<h3>자동 저금통</h3>
				<p>자투리 자동저장</p>
			</div>
		</div>
	</section>

	<!-- Footer 삽입 -->
	<div id="footer"></div>
	
<script>
function goToCardService() {
    const token = localStorage.getItem('token');
    console.log("👉 가져온 토큰:", token);
    if (!token) {
        alert("로그인이 필요합니다.");
        window.location.href = "loginpage";
        return;
    }

    // ✅ 카드 서비스의 주소로 이동하면서 토큰 포함 (Fetch 사용)
    fetch("http://localhost:8812/secure/verify", {
        method: "GET",
        headers: {
        	  "Authorization": "Bearer " + token
        	}

    })
    .then(res => {
        if (res.ok) {
            // ✅ HTML을 문자열로 받아서 새로운 창에 띄우기
            return res.text();
        } else {
            throw new Error("인증 실패");
        }
    })
    .then(html => {
        document.open();
        document.write(html);
        document.close();
    })
    .catch(err => {
        alert("인증되지 않았습니다. 다시 로그인해주세요.");
        window.location.href = "loginpage";
    });
}

</script>
</body>
</html>