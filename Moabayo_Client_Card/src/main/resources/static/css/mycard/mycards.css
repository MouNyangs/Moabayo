/* =============================
   Clean Rail + Sheet — #mycards
   ============================= */
#mycards{
  --ink:#111827; --sub:#6b7280;
  --bg:#ffffff;  --card:#ffffff;
  --line:#e5e7eb; --muted:#f8fafc;
  --brand:#7c3aed;
  --shadow:0 10px 24px rgba(17,24,39,.08);
  --hero1:#e9d5ff; --hero2:#bfdbfe;
}

html[data-theme="dark"] #mycards{
  --ink:#e5e7eb; --sub:#9aa5b1;
  --bg:#0b0f14;  --card:#0f151c;
  --line:#111827; --muted:#0b1016;
  --brand:#a78bfa;
  --shadow:0 10px 24px rgba(0,0,0,.42);
  --hero1:#2a2340; --hero2:#0f1b2a;
  color-scheme: dark;
}

/* page */
#mycards.page{ max-width:1100px; margin:24px auto 56px; padding:0 16px; background:var(--bg); }
#mycards *{ box-sizing:border-box; }
.mc-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; }
.mc-header h1{ margin:8px 0 14px; color:var(--ink); }
.btn{ border:1px solid var(--line); background:var(--card); color:var(--ink); border-radius:12px; padding:8px 12px; cursor:pointer; }
.btn.primary{ background:linear-gradient(135deg,var(--brand),#6d28d9); color:#fff; border:none; }

/* rail */
.rail-wrap{ margin:6px 0 14px; }
.rail{
  display:flex; gap:12px; padding:6px 2px 12px;
  overflow-x:auto; scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch;
}
.rail::-webkit-scrollbar{ height:8px; }
.rail::-webkit-scrollbar-thumb{ background:rgba(124,58,237,.25); border-radius:999px; }

.card-mini{
  position:relative; width:360px; height:190px; flex:0 0 auto;
  scroll-snap-align:center;
  border:1px solid var(--line); border-radius:16px; overflow:hidden;
  background:var(--card); color:var(--ink); box-shadow:var(--shadow);
  transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
.card-mini:hover{ transform:translateY(-2px); box-shadow:0 14px 34px rgba(0,0,0,.12); }
.card-mini[aria-selected="true"]{ border-color:rgba(124,58,237,.32); box-shadow:0 16px 36px rgba(0,0,0,.16); }

.card-mini .skin{ position:absolute; inset:0; background:linear-gradient(135deg,var(--skin1,#f8fafc),var(--skin2,#eef2ff)); opacity:.95; }
.card-mini .brand{ position:absolute; left:14px; top:12px; font-weight:800; opacity:.92; }
.card-mini .last4{ position:absolute; left:14px; bottom:14px; font-weight:800; letter-spacing:2px; }
.card-mini .exp{ position:absolute; right:14px; bottom:14px; color:var(--sub); font-weight:700; }

/* hero */
.hero{
  border:1px solid var(--line); border-radius:16px; padding:18px; box-shadow:var(--shadow);
  background:linear-gradient(135deg,var(--hero1),var(--hero2));
  color:var(--ink);
}
.hero .brand{ font-weight:800; margin-bottom:6px; opacity:.9; }
.hero .number{ font-size:24px; letter-spacing:2px; margin-bottom:8px; font-weight:800; }
.hero .holder-row{ display:flex; justify-content:space-between; color:var(--sub); font-weight:700; }

/* tabs */
.tabs{ display:flex; gap:6px; margin:14px 0 8px; }
.tab{ border:1px solid var(--line); background:var(--card); color:var(--ink); border-radius:10px; padding:8px 12px; cursor:pointer; }
.tab.active{ background:var(--muted); }

/* panels */
.panel{ display:none; border:1px solid var(--line); background:var(--card); border-radius:14px; padding:12px; }
.panel.show{ display:block; }

/* overview modules */
.mods{ display:grid; grid-template-columns:repeat(3,1fr); gap:12px; }
.mod{ border:1px solid var(--line); background:var(--card); border-radius:12px; padding:12px; }
.mod header{ display:flex; justify-content:space-between; align-items:end; margin-bottom:10px; }
.mod h3{ margin:0; font-size:16px; color:var(--ink); }
.mod .val{ color:var(--sub); }
.bar{ width:100%; height:12px; border-radius:999px; background:var(--muted); border:1px solid var(--line); overflow:hidden; }
.bar span{ display:block; height:100%; width:0; background:linear-gradient(90deg,var(--brand),#6d28d9); }

/* history */
.tx{ list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:8px; }
.tx li{ display:flex; justify-content:space-between; align-items:center; border:1px solid var(--line); border-radius:12px; padding:10px; background:var(--card); }
.tx .left{ display:flex; align-items:center; gap:10px; }
.tx .logo{ width:28px; height:28px; border-radius:7px; background:var(--muted); border:1px solid var(--line); }
.tx .name{ font-weight:700; color:var(--ink); }
.tx .cat{ color:var(--sub); font-size:12px; }
.tx .amt{ font-weight:800; }

/* settings */
.form .row{ display:grid; grid-template-columns:120px 1fr; align-items:center; gap:10px; margin:10px 0; }
.lab{ color:var(--sub); }
.input{ width:100%; border:1px solid var(--line); background:var(--card); color:var(--ink); border-radius:10px; padding:10px 12px; outline:none; }
.input:focus{ border-color:var(--brand); box-shadow:0 0 0 3px rgba(124,58,237,.12); }

/* responsive */
@media (max-width: 980px){
  .mods{ grid-template-columns:1fr; }
}
/* ===== Page backdrop that follows the active card ===== */
#mycards { position: relative; z-index: 1; }
.page-bg{
  position: fixed; inset: 0; z-index: 0; pointer-events: none;
  /* 카드 컬러가 없을 때 기본 */
  --pageA: var(--hero1); 
  --pageB: var(--hero2);
  /* 최신 브라우저: color-mix로 은은하게 */
  background:
    radial-gradient(80% 60% at 0% 0%,
      color-mix(in srgb, var(--pageA) 28%, transparent), transparent 60%),
    radial-gradient(80% 60% at 100% 100%,
      color-mix(in srgb, var(--pageB) 28%, transparent), transparent 60%),
    var(--bg);
  transition: background .25s ease;
}

/* ===== Dark host surface fixes: 레이아웃의 흰 배경 제거 ===== */
html[data-theme="dark"] body,
html[data-theme="dark"] .site-content,
html[data-theme="dark"] body.site-layout,
html[data-theme="dark"] body.site-layout main.site-content{
  background: var(--bg) !important;  /* #0b0f14 */
}

/* (토글이 body에 data-theme를 거는 경우도 커버) */
body[data-theme="dark"] #mycards{
  --ink:#e5e7eb; --sub:#9aa5b1; --bg:#0b0f14; --card:#0f151c;
  --line:#111827; --muted:#0b1016; --brand:#a78bfa;
  --shadow:0 10px 24px rgba(0,0,0,.42);
  --hero1:#2a2340; --hero2:#0f1b2a;
  color-scheme: dark;
}

/* 공통: 페이지 배경 변수(선택 카드와 동기화) */
.page-bg{
  position: fixed; inset: 0; z-index: 0; pointer-events: none;
  --pageA: var(--hero1); /* JS로 주입됨 */
  --pageB: var(--hero2);
  transition: background .25s ease, opacity .25s ease, filter .25s ease;
}

/* A) spread: 화면 전체 은은 그라데이션 (기본) */
#mycards:not([data-bg]), 
#mycards[data-bg="spread"]{
  /* no-op */
}
#mycards:not([data-bg]) .page-bg,
#mycards[data-bg="spread"] .page-bg{
  background:
    radial-gradient(90% 70% at 0% 0%,
      color-mix(in srgb, var(--pageA) 18%, transparent), transparent 60%),
    radial-gradient(90% 70% at 100% 100%,
      color-mix(in srgb, var(--pageB) 18%, transparent), transparent 60%),
    var(--bg);
}

/* B) poster: 큼직한 '카드판' 위에 리스트/히어로 얹는 스타일 */
#mycards[data-bg="poster"] .page-bg{ background: var(--bg); } /* 바탕은 평면 */
#mycards[data-bg="poster"] .page-bg::before{
  content:"";
  position: fixed; left:50%;
  /* 화면/레이아웃에 맞춰 자연스러운 판 크기 */
  top: clamp(90px, 12vh, 140px);
  width: min(1120px, 92vw);
  height: clamp(260px, 30vh, 360px);
  transform: translateX(-50%);
  border-radius: 28px;
  background: linear-gradient(135deg, var(--pageA), var(--pageB));
  border: 1px solid var(--line);       /* 👉 깔끔한 카드형 테두리 */
  box-shadow: 0 24px 50px rgba(0,0,0,.12);
  z-index: 0;
  filter: saturate(.98);
}

/* C) flat: 그라데이션 없이 평면(“하나의 변화” 느낌) */
#mycards[data-bg="flat"] .page-bg{ background: var(--bg) !important; }

/* 다크모드: 레이아웃 흰 띠 방지(이미 넣었다면 중복 OK) */
html[data-theme="dark"] body,
html[data-theme="dark"] .site-content,
html[data-theme="dark"] body.site-layout,
html[data-theme="dark"] body.site-layout main.site-content{
  background: var(--bg) !important;
}
/* 섹션 밑바탕/레이어 정리 */
#mycards{ position: relative; }
#mycards > *:not(#ambient){ position: relative; z-index: 1; }

/* ✨ 앰비언트 배경 (활성 카드 색이 은은히 번짐) */
#ambient.ambient{
  position:absolute;
  inset:-12vh -12vw;               /* 살짝 크게 깔아서 스크롤에도 자연스럽게 */
  z-index:0;
  pointer-events:none;
  /* 카드 컬러 변수: --pageA / --pageB (JS에서 갱신) */
  --a: var(--pageA, #7c3aed);
  --b: var(--pageB, #60a5fa);

  /* 마우스/포커스 위치에 따라 미세 이동 (JS가 --mx/--my 주입) */
  --mx: 0;
  --my: 0;

  background:
    radial-gradient(42% 55% at calc(50% + var(--mx)*40px) calc(36% + var(--my)*40px),
      color-mix(in oklab, var(--a) 62%, transparent) 0%,
      transparent 65%)
    ,
    radial-gradient(38% 48% at calc(18% + var(--mx)*25px) calc(80% + var(--my)*30px),
      color-mix(in oklab, var(--b) 48%, transparent) 0%,
      transparent 70%);
  filter: blur(68px) saturate(1.05);
  opacity:.64;
  transition: opacity .2s ease, filter .2s ease;
}

/* 다크에서는 살짝 톤 다운 + 대비 업 */
html[data-theme="dark"] #ambient.ambient{
  opacity:.56;
  filter: blur(78px) saturate(1.1);
}

/* (선택) 기존 좌우 레일/장식이 있으면 숨김 */
.card-row::before,
.card-row::after,
.poster-rail,
.poster-rail::before,
.poster-rail::after{
  display:none !important;
  content:none !important;
}

/* 진행바/카드 라인 여전히 다크에서 하얀 테두리 안 생기게 */
#mycards .panel, #mycards .mod, #mycards .card, #mycards .input{
  border-color: var(--mc-line) !important;
  background: var(--mc-card);
  color: var(--mc-ink);
}
