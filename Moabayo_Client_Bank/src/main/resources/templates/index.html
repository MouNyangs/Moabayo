<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>모으냥즈 | 뱅크 인덱스</title>
  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="icon" href="/images/cat.ico" type="image/x-icon" />
  <style>
    :root{
      --cat-beige:#F4E6C4; /* 고양이 털 느낌 베이지 */
      --cat-amber:#F2C14E; /* 포인트 노랑 */
      --cat-brown:#6B4F34; /* 텍스트 브라운 */
      --cat-cream:#FFF8E7;
    }
    body{ background: var(--cat-cream); color: var(--cat-brown); }
    .nyang-card{ background: linear-gradient(145deg, var(--cat-beige), #fff); border:0; border-radius: 1rem; }
    .nyang-badge{ background: var(--cat-amber); color:#2b2b2b; }
    .table thead th{ background: var(--cat-beige); }
    .shadow-soft{ box-shadow: 0 10px 25px rgba(0,0,0,.06); }
    .avatar{ width:40px; height:40px; border-radius:50%; background: var(--cat-amber); display:inline-flex; align-items:center; justify-content:center; font-weight:700; }
    .brand{ font-weight:800; letter-spacing:.5px; }
  </style>
</head>
<body>

  <main class="container py-4">
    <!-- 헤더 영역 -->
    <div class="d-flex align-items-center justify-content-between mb-4">
      <div class="d-flex align-items-center gap-3">
        <div class="avatar">🐱</div>
        <div>
          <div class="small text-muted">어서오세요</div>
          <h2 class="m-0" th:text="${loginId} + ' 님'">guest 님</h2>
        </div>
      </div>
      <span class="badge nyang-badge rounded-pill px-3 py-2">BANK INDEX</span>
    </div>

    <!-- 잔액 카드 -->
    <section class="row g-4 mb-4">
      <div class="col-12 col-lg-6">
        <div class="card nyang-card shadow-soft p-3">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-start">
              <div>
                <h5 class="card-title mb-1">냥코인 보유</h5>
                <div class="text-muted small">NyangCoin</div>
              </div>
              <span class="badge nyang-badge">보유 현황</span>
            </div>
            <div class="display-6 mt-3" th:if="${NyangCoin != null}" th:text="${#numbers.formatInteger(NyangCoin.balance, 3, 'COMMA')} + ' 원'">0 원</div>
            <div class="text-muted" th:if="${NyangCoin != null}" th:text="'코인 ID: ' + ${NyangCoin.nyangCoinId}">코인 ID: -</div>
            <div class="text-muted" th:if="${NyangCoin == null}">보유한 냥코인이 없습니다.</div>
            <div class="mt-3 d-flex gap-2">
              <a href="/bank/charge" class="btn btn-dark">충전하기</a>
              <a href="/bank/transfer" class="btn btn-outline-dark">송금하기</a>
            </div>
          </div>
        </div>
      </div>

      <!-- 빠른 이동 -->
      <div class="col-12 col-lg-6">
        <div class="card nyang-card shadow-soft p-3 h-100">
          <div class="card-body">
            <h5 class="card-title mb-3">빠른 이동</h5>
            <div class="row g-2">
              <div class="col-6"><a class="btn w-100 btn-outline-dark" href="/bank/account/list">보유 계좌</a></div>
              <div class="col-6"><a class="btn w-100 btn-outline-dark" href="/bank/product/list">은행 상품</a></div>
              <div class="col-6"><a class="btn w-100 btn-outline-dark" href="/bank/recommend">추천 상품</a></div>
              <div class="col-6"><a class="btn w-100 btn-outline-dark" href="/bank/history">거래 내역</a></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 거래 내역 테이블 -->
    <section class="card shadow-soft">
      <div class="card-body">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h5 class="m-0">최근 거래 내역</h5>
          <a href="/bank/history" class="btn btn-sm btn-outline-dark">전체 보기</a>
        </div>

        <!-- 빈 상태 -->
        <div th:if="${#lists.isEmpty(NyangCoinHistory)}" class="text-center text-muted py-5">
          아직 표시할 거래 내역이 없습니다.
        </div>

        <!-- 테이블 -->
        <div th:if="${!#lists.isEmpty(NyangCoinHistory)}" class="table-responsive">
          <table class="table align-middle">
            <thead>
              <tr>
                <th scope="col">일시</th>
                <th scope="col">구분</th>
                <th scope="col" class="text-end">금액(원)</th>
                <th scope="col" class="text-end">잔액(원)</th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="h : ${NyangCoinHistory}">
                <td th:text="${h.createdAt != null ? #dates.format(h.createdAt, 'yyyy-MM-dd HH:mm') : ''}">-</td>
                <td>
                  <span class="badge rounded-pill" th:classappend=" ${h.type}=='CHARGE' ? 'text-bg-success' : (${h.type}=='PAY' ? 'text-bg-danger' : 'text-bg-secondary') "
                        th:text="${h.type}">TYPE</span>
                </td>
                <td class="text-end" th:text="${#numbers.formatInteger(h.amount, 3, 'COMMA')}">10,000</td>
                <td class="text-end" th:text="${#numbers.formatInteger(h.balanceAfter, 3, 'COMMA')}">50,000</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer class="py-4 mt-5" style="background:var(--cat-beige)">
    <div class="container d-flex justify-content-between align-items-center">
      <span class="small">© 2025 MoaNyangs Bank</span>
      <span class="small">고객센터: 1588-0000</span>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
